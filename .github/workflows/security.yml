name: Security Check

on:
  push:
    branches: [ main, develop, master ]
  pull_request:
    branches: [ main, develop, master ]

jobs:
  secrets-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Check for secrets
        run: |
          # Check for potential secrets in code
          echo "Checking for potential secrets..."
          if grep -riE "(api[_-]?key|secret|token|password)" --include="*.py" --include="*.md" --include="*.sh" \
             | grep -v ".env.example" \
             | grep -v ".git" \
             | grep -v "your_" \
             | grep -v "YOUR_" \
             | grep -v "example" \
             | grep -v "test" \
             | grep -v "# "; then
            echo "⚠️ Potential secrets found in code"
            exit 1
          fi
          echo "✅ No secrets found"
